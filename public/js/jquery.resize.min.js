var NAVY=NAVY||{};NAVY.Resize=function(e,t){var n;this.orignTarget=e,this.targetObj=$(e),n={minWidth:100,minHeight:100,startWidth:150,startHeight:150,left:0,top:0,isMoveSpace:{x:3,y:3},limitObj:this.targetObj.offsetParent()||"body"},$.extend(n,t),this.options=n,this.limitObjWidth=this.options.limitObj.width(),this.limitObjHeight=this.options.limitObj.height(),this.init()},NAVY.Resize.prototype={init:function(){var e=this,t=e.targetObj,n=e.options;return t.append(e.makeResizeHtml()).css({width:n.startWidth,height:n.startHeight}),e.resizeObjs=t.find(".navy-window-resize"),t.css("position")==="static"&&t.css("position","relative"),e.initEvent(),this},initEvent:function(){var e,t,n=this,r=this.targetObj,i=this.resizeObjs,s=this.options,o=s.minWidth,u=s.minHeight,a=!1,f={startWidth:s.startWidth,startHeight:s.startHeight,left:s.left,top:s.top,pageX:0,pageY:0},l=null,c=0,h=0,p=0,d=0,v=this.limitObjWidth,m=this.limitObjHeight;return i.mousedown(function(e){return r=$(this).closest(n.orignTarget),l=$(this).attr("resize"),a=!0,f.pageX=e.pageX,f.pageY=e.pageY,f.startWidth=r.outerWidth(),f.startHeight=r.outerHeight(),f.left=r.position().left,f.top=r.position().top,!1}),$(document).on("mousemove mouseup",function(n){var i,g,y;switch(n.type){case"mouseup":return a=!1,!1;case"mousemove":if(a){i={x:n.pageX,y:n.pageY},g=i.x-f.pageX,y=i.y-f.pageY;if(g%s.isMoveSpace.x===0||y%s.isMoveSpace.y===0)l==="t"?(p=Math.max(f.top+y,0),c=f.startHeight-y,c=c<=u?u:c,e=m-p,c>=e&&(c=e),c===u?r.css({height:c}):r.css({height:c,top:p})):l==="b"?(c=f.startHeight+y,c=c<=u?u:c,e=m-f.top,c>=e&&(c=e),r.css({height:c})):l==="l"?(p=Math.max(f.left+g,0),c=f.startWidth-g,c=c<=o?o:c,e=v-p,c>=e&&(c=e),c===o?r.css({width:c}):r.css({width:c,left:p})):l==="r"?(c=f.startWidth+g,c=c<=o?o:c,e=v-f.left,c>=e&&(c=e),r.css({width:c})):l==="rt"?(c=f.startWidth+g,c=c<=o?o:c,h=f.startHeight-y,h=h<=u?u:h,p=Math.max(f.top+y,0),e=v-f.left,t=m-p,c>=e&&(c=e),h>=t&&(h=t),h===u?r.css({width:c,height:h}):r.css({width:c,height:h,top:p})):l==="rb"?(c=f.startWidth+g,c=c<=o?o:c,h=f.startHeight+y,h=h<=u?u:h,e=v-f.left,t=m-f.top,c>=e&&(c=e),h>=t&&(h=t),r.css({width:c,height:h})):l==="lt"?(p=Math.max(f.left+g,0),c=f.startWidth-g,c=c<=o?o:c,d=Math.max(f.top+y,0),h=f.startHeight-y,h=h<=u?u:h,e=v-p,t=m-d,c>=e&&(c=e),h>=t&&(h=t),c===o?h!==u?r.css({width:c,height:h,top:d}):r.css({width:c,height:h}):h===u?r.css({width:c,height:h,left:p}):r.css({width:c,height:h,left:p,top:d})):(p=Math.max(f.left+g,0),c=f.startWidth-g,c=c<=o?o:c,h=f.startHeight+y,h=h<=u?u:h,e=v-p,t=m-f.top,c>=e&&(c=e),h>=t&&(h=t),c===o?r.css({width:c,height:h}):r.css({width:c,height:h,left:p}))}return!1}}),this},makeResizeHtml:function(){var e=['<div class="navy-window-resize window-resize-t" resize="t"></div>'];return e.push('<div class="navy-window-resize window-resize-r" resize="r"></div>'),e.push('<div class="navy-window-resize window-resize-b" resize="b"></div>'),e.push('<div class="navy-window-resize window-resize-l" resize="l"></div>'),e.push('<div class="navy-window-resize window-resize-rt" resize="rt"></div>'),e.push('<div class="navy-window-resize window-resize-rb" resize="rb"></div>'),e.push('<div class="navy-window-resize window-resize-lt" resize="lt"></div>'),e.push('<div class="navy-window-resize window-resize-lb" resize="lb"></div>'),e.join("")}}