var NAVY=NAVY||{};NAVY.Resize=function(t,i){this.orignTarget=t,this.targetObj=$(t);var s={minWidth:100,minHeight:100,startWidth:150,startHeight:150,left:0,top:0,isMoveSpace:{x:3,y:3},limitObj:this.targetObj.offsetParent()||"body",isLimit:!0,isL:!0,isR:!0,isT:!0,isB:!0,isRT:!0,isRB:!0,isLT:!0,isLB:!0};$.extend(s,i),this.options=s,this.init()},NAVY.Resize.prototype={init:function(){var t=this,i=t.targetObj,s=t.options;return i.append(t.makeResizeHtml()).css({width:s.startWidth,height:s.startHeight}),t.limitObjWidth=this.options.limitObj.width(),t.limitObjHeight=this.options.limitObj.height(),t.resizeObjs=i.find(".navy-window-resize"),"static"===i.css("position")&&i.css("position","relative"),t.initEvent(),this},initEvent:function(){var t,i,s=this,e=this.targetObj,h=this.resizeObjs,r=this.options,a=r.minWidth,o=r.minHeight,n=!1,d={startWidth:r.startWidth,startHeight:r.startHeight,left:r.left,top:r.top,pageX:0,pageY:0},p=null,g=0,l=0,w=0,c=0,v=this.limitObjWidth,u=this.limitObjHeight;return h.mousedown(function(t){var i=$(this);return e=i.closest(s.orignTarget),p=i.attr("resize"),n=!0,d.pageX=t.pageX,d.pageY=t.pageY,d.startWidth=e.outerWidth(),d.startHeight=e.outerHeight(),d.left=e.position().left,d.top=e.position().top,!1}),$(document).on("mousemove mouseup",function(s){switch(s.type){case"mouseup":return n=!1,!1;case"mousemove":if(n){var h={x:s.pageX,y:s.pageY},f=h.x-d.pageX,m=h.y-d.pageY;(0===f%r.isMoveSpace.x||0===m%r.isMoveSpace.y)&&("t"===p?r.isLimit?(w=Math.max(d.top+m,0),g=d.startHeight-m,g=o>=g?o:g,t=u-w,g>=t&&(g=t),g===o?e.css({height:g}):e.css({height:g,top:w})):(w=d.top+m,g=d.startHeight-m,e.css({height:g,top:w})):"b"===p?r.isLimit?(g=d.startHeight+m,g=o>=g?o:g,t=u-d.top,g>=t&&(g=t),e.css({height:g})):(g=d.startHeight+m,e.css({height:g})):"l"===p?r.isLimit?(w=Math.max(d.left+f,0),g=d.startWidth-f,g=a>=g?a:g,t=v-w,g>=t&&(g=t),g===a?e.css({width:g}):e.css({width:g,left:w})):(w=d.left+f,g=d.startWidth-f,e.css({width:g,left:w})):"r"===p?r.isLimit?(g=d.startWidth+f,g=a>=g?a:g,t=v-d.left,g>=t&&(g=t),e.css({width:g})):(g=d.startWidth+f,e.css({width:g})):"rt"===p?r.isLimit?(g=d.startWidth+f,g=a>=g?a:g,l=d.startHeight-m,l=o>=l?o:l,w=Math.max(d.top+m,0),t=v-d.left,i=u-w,g>=t&&(g=t),l>=i&&(l=i),l===o?e.css({width:g,height:l}):e.css({width:g,height:l,top:w})):(g=d.startWidth+f,l=d.startHeight-m,w=d.top+m,e.css({width:g,height:l,top:w})):"rb"===p?r.isLimit?(g=d.startWidth+f,g=a>=g?a:g,l=d.startHeight+m,l=o>=l?o:l,t=v-d.left,i=u-d.top,g>=t&&(g=t),l>=i&&(l=i),e.css({width:g,height:l})):(g=d.startWidth+f,l=d.startHeight+m,e.css({width:g,height:l})):"lt"===p?r.isLimit?(w=Math.max(d.left+f,0),g=d.startWidth-f,g=a>=g?a:g,c=Math.max(d.top+m,0),l=d.startHeight-m,l=o>=l?o:l,t=v-w,i=u-c,g>=t&&(g=t),l>=i&&(l=i),g===a?l!==o?e.css({width:g,height:l,top:c}):e.css({width:g,height:l}):l===o?e.css({width:g,height:l,left:w}):e.css({width:g,height:l,left:w,top:c})):(w=d.left+f,c=d.top+m,g=d.startWidth-f,l=d.startHeight-m,e.css({width:g,height:l,left:w,top:c})):r.isLimit?(w=Math.max(d.left+f,0),g=d.startWidth-f,g=a>=g?a:g,l=d.startHeight+m,l=o>=l?o:l,t=v-w,i=u-d.top,g>=t&&(g=t),l>=i&&(l=i),g===a?e.css({width:g,height:l}):e.css({width:g,height:l,left:w})):(w=d.left+f,g=d.startWidth-f,l=d.startHeight+m,e.css({width:g,height:l,left:w})))}return!1}}),this},makeResizeHtml:function(){var t=this.options,i=[];return t.isT&&i.push('<div class="navy-window-resize window-resize-t" resize="t"></div>'),t.isR&&i.push('<div class="navy-window-resize window-resize-r" resize="r"></div>'),t.isB&&i.push('<div class="navy-window-resize window-resize-b" resize="b"></div>'),t.isL&&i.push('<div class="navy-window-resize window-resize-l" resize="l"></div>'),t.isRT&&i.push('<div class="navy-window-resize window-resize-rt" resize="rt"></div>'),t.isRB&&i.push('<div class="navy-window-resize window-resize-rb" resize="rb"></div>'),t.isLT&&i.push('<div class="navy-window-resize window-resize-lt" resize="lt"></div>'),t.isLB&&i.push('<div class="navy-window-resize window-resize-lb" resize="lb"></div>'),i.join("")}};